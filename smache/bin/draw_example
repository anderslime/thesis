#!/usr/bin/env python

import sys
sys.path.append('../smache')

from smache import DependenceGraph, SourceNode, computed, graph_drawer

class DependenceGraphExample(DependenceGraph):
    number = SourceNode("Number")

    @computed(number)
    def f1(self, x):
        if x is None:
            return None
        return x + 1

    @computed(number)
    def f2(self, y):
        if y is None:
            return None
        return y + 1

    @computed(f1, f2)
    def total(self, x, y):
        if x is None or y is None:
            return None
        return y + x

graph = DependenceGraphExample()
graph_drawer.draw(graph, 'hello')
